<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Video Chat</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.7.3/socket.io.js"></script>
        <link href="/css/video.css" rel="stylesheet" />
    </head>
    <body>

        <div id="video-chat-form">
            <h2 class="text">Video Chat App</h2>
            <input id="roomName" type="text" name="roomName" placeholder="Room Name" />
            <button id="join">Join</button>
        </div>
        <div id="video-chat-rooms">
            <video id="user-video"></video>
            <video id="peer-video"></video>
        </div>
         
        <div class="btn-group" id="btn-group" style="display:none;">
            <button id="muteButton">Mute</button>
            <button id="leaveRoomBtn">Leave Room</button>
            <button id="hideCamera">Hide Camera</button>
          </div>
    </body>
    <script src="https://cdn.socket.io/socket.io-3.0.1.min.js"></script>
    <script src="/js/video.js"></script>
    <script>
        window.addEventListener('beforeunload', function(event) {
        // Make an API call to log out the user when the window is closed or unloaded
        fetch('/logout', {
            method: 'GET',
            credentials: 'same-origin' // Send cookies with the request if any
        })
        .then(response => {
            // Handle response
            console.log('User logged out successfully');
        })
        .catch(error => {
            // Handle error
            console.error('Error logging out:', error);
        });
    });
    </script>
</html>